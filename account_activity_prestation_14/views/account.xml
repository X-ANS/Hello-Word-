<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="activity_account_account_inherit" model="ir.ui.view">
            <field name="name">activity.account.account.form</field>
            <field name="model">account.account</field>
            <field name="inherit_id" ref="account.view_account_form"/>
            <field name="arch" type="xml">

                <xpath expr="//form" position="inside">
                    <notebook>
                        <page string="Activité">
                            <group>
                                <field name="activity_id"/>
                                <field name="key_activity_id"/>
                            </group>
                        </page>
                    </notebook>
                </xpath>


            </field>
        </record>

        <record id="activity_prestation_form_move_inherit" model="ir.ui.view">
            <field name="name">activity.prestation.section.move.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <!-- find field description and add the field
                     idea_ids after it -->
                <xpath expr="//tree[1]//field[@name='account_id']" position="attributes">
                    <attribute name="on_change">onchange_account_id(account_id, partner_id, context)</attribute>
                </xpath>

                <xpath expr="//tree[1]" position="inside">
                    <field name="activity_id" string="Activité"/>
                    <field name="activity_type" invisible="1"/>
                    <field name="prestation_id" string="Prestation"
                           attrs="{'readonly':[('activity_type','!=','direct')]}"/>
                    <field name="key_activity_id"/>
                </xpath>


                <!--<xpath expr="//tree[@string='Journal Items']/field[@name='analytic_account_id']" position="replace">
                </xpath> -->


            </field>
        </record>


        <record id="activity_prestation_form_inherit" model="ir.ui.view">
            <field name="name">activity.prestation.section.form</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_form"/>
            <field name="arch" type="xml">
                <!-- find field description and add the field
                     idea_ids after it -->
                <xpath expr="//notebook/page/group/group[8]" position="inside">
                    <field name="activity_id" string="Activité"/>
                    <field name="prestation_id" string="Prestation"/>
                </xpath>

                <!--<field name="analytic_account_id" position="replace">
                </field> -->

            </field>
        </record>

        <record id="activity_prestation_tree_inherit" model="ir.ui.view">
            <field name="name">activity.prestation.section.tree</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree"/>
            <field name="arch" type="xml">
                <!-- find field description and add the field
                     idea_ids after it -->
                <xpath expr="//field[@name='credit']" position="after">
                    <field name="activity_id" string="Activité"/>
                    <field name="activity_type" string="type d'activité" invisible="1"/>
                    <field name="prestation_id" string="Prestation"
                           attrs="{'readonly':[('activity_type', '!=', 'direct')]}"/>
                    <field name="key_activity_id"/>
                </xpath>

                <!--<field name="analytic_account_id" position="replace">
                </field> -->

            </field>
        </record>

        <record id="activity_prestation_form_analytic_inherit" model="ir.ui.view">
            <field name="name">activity.prestation.section.analytic.form</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="analytic.view_account_analytic_line_form"/>
            <field name="arch" type="xml">
                <!-- find field description and add the field
                     idea_ids after it -->
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="activity_id" string="Activité"/>
                    <field name="prestation_id" string="Prestation"/>
                </xpath>


            </field>
        </record>


        <record id="activity_prestation_tree_analytic_inherit" model="ir.ui.view">
            <field name="name">activity.prestation.analytic.tree</field>
            <field name="model">account.analytic.line</field>
            <field name="inherit_id" ref="analytic.view_account_analytic_line_tree"/>
            <field name="arch" type="xml">
                <!-- find field description and add the field
                     idea_ids after it -->
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="activity_id" string="Activité"/>
                    <field name="prestation_id" string="Prestation"/>
                </xpath>


            </field>
        </record>
        <record id="view_account_move_line_filter_inherited_abc" model="ir.ui.view">
            <field name="name">journal.items</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_account_move_line_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="inside">
                    <group>
                        <filter string="Date" name="groupby_date" domain="[]" context="{'group_by': 'date'}"/>
                        <filter string="Activité" name="Activité" icon="terp-go-month" context="{'group_by':'activity_id'}"/>
<!--                        <filter string="Prestation" icon="terp-go-month" context="{'group_by':'prestation_id'}"/>-->
<!--                        <filter string="Clé d'activité" icon="terp-go-month" context="{'group_by':'key_activity_id'}"/>-->
<!--                        <filter string="Type d'activité" icon="terp-go-month" context="{'group_by':'activity_type'}"/>-->
                    </group>
                </xpath>
            </field>
        </record>


<!--        <record id="view_account_move_line_filter" model="ir.ui.view">-->
<!--            <field name="name">account.move.line.search</field>-->
<!--            <field name="model">account.move.line</field>-->
<!--            <field name="arch" type="xml">-->
<!--                <search string="Search Journal Items">-->
<!--                    <field name="name" string="Journal Item" filter_domain="[-->
<!--                        '|', '|', '|',-->
<!--                        ('name', 'ilike', self), ('ref', 'ilike', self), ('account_id', 'ilike', self), ('partner_id', 'ilike', self)]"/>-->
<!--                    <field name="date"/>-->
<!--                    <field name="account_id"/>-->
<!--                    <field name="account_root_id"/>-->
<!--                    <field name="account_internal_type"/>-->
<!--                    <field name="partner_id"/>-->
<!--                    <field name="journal_id"/>-->
<!--                    <field name="move_id" string="Journal Entry" filter_domain="[-->
<!--                        '|', '|', ('move_id.name', 'ilike', self), ('move_id.ref', 'ilike', self), ('move_id.partner_id', 'ilike', self)]"/>-->
<!--                    <field name="tax_ids"/>-->
<!--                    <field name="tax_line_id" string="Originator Tax"/>-->
<!--                    <field name="reconcile_model_id"/>-->
<!--                    <separator/>-->
<!--                    <filter string="Unposted" name="unposted" domain="[('move_id.state', '=', 'draft')]"-->
<!--                            help="Unposted Journal Items"/>-->
<!--                    <filter string="Posted" name="posted" domain="[('move_id.state', '=', 'posted')]"-->
<!--                            help="Posted Journal Items"/>-->
<!--                    <separator/>-->
<!--                    <filter string="To Check" name="to_check" domain="[('move_id.to_check', '=', True)]"/>-->
<!--                    <separator/>-->
<!--                    <filter string="Unreconciled"-->
<!--                            domain="[('full_reconcile_id', '=', False), ('balance', '!=', 0), ('account_id.reconcile', '=', True)]"-->
<!--                            help="Journal items where matching number isn't set" name="unreconciled"/>-->
<!--                    <separator/>-->
<!--                    <filter string="Sales" name="sales" domain="[('move_id.journal_id.type', '=', 'sale')]"-->
<!--                            context="{'default_journal_type': 'sale'}"/>-->
<!--                    <filter string="Purchases" name="purchases" domain="[('move_id.journal_id.type', '=', 'purchase')]"-->
<!--                            context="{'default_journal_type': 'purchase'}"/>-->
<!--                    <filter string="Bank" name="bank" domain="[('move_id.journal_id.type', '=', 'bank')]"-->
<!--                            context="{'default_journal_type': 'bank'}"/>-->
<!--                    <filter string="Cash" name="cash" domain="[('move_id.journal_id.type', '=', 'cash')]"-->
<!--                            context="{'default_journal_type': 'cash'}"/>-->
<!--                    <filter string="Miscellaneous" domain="[('move_id.journal_id.type', '=', 'general')]"-->
<!--                            name="misc_filter" context="{'default_journal_type': 'general'}"/>-->
<!--                    <separator/>-->
<!--                    <filter string="Payable" domain="[('account_id.internal_type', '=', 'payable')]"-->
<!--                            help="From Payable accounts" name="payable"/>-->
<!--                    <filter string="Receivable" domain="[('account_id.internal_type', '=', 'receivable')]"-->
<!--                            help="From Receivable accounts" name="receivable"/>-->
<!--                    <separator/>-->
<!--                    <filter string="Date" name="date" date="date"/>-->
<!--                    <separator/>-->
<!--                    <group expand="0" string="Group By">-->
<!--                        <filter string="Journal Entry" name="group_by_move" domain="[]"-->
<!--                                context="{'group_by': 'move_id'}"/>-->
<!--                        <filter string="Account" name="group_by_account" domain="[]"-->
<!--                                context="{'group_by': 'account_id'}"/>-->
<!--                        <filter string="Partner" name="group_by_partner" domain="[]"-->
<!--                                context="{'group_by': 'partner_id'}"/>-->
<!--                        <filter string="Journal" name="journal" domain="[]" context="{'group_by': 'journal_id'}"/>-->
<!--                        <filter string="Date" name="groupby_date" domain="[]" context="{'group_by': 'date'}"/>-->
<!--                        <filter string="Activité" icon="terp-go-month" context="{'group_by':'activity_id'}"/>-->
<!--                        <filter string="Prestation" icon="terp-go-month" context="{'group_by':'prestation_id'}"/>-->
<!--                        <filter string="Clé d'activité" icon="terp-go-month" context="{'group_by':'key_activity_id'}"/>-->
<!--                        <filter string="Type d'activité" icon="terp-go-month" context="{'group_by':'activity_type'}"/>-->
<!--                    </group>-->
<!--                </search>-->
<!--            </field>-->
<!--        </record>-->
    </data>

</odoo>